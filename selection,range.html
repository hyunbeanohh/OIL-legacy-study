<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>selection and Range </title>
</head>

<body contenteditable="true">
    <script type="text/javascript">
        function SelectLine(el){
            if (window.getSelection) {  // all browsers, except IE before version 9
                const sel = window.getSelection ();
                const rangeToSelect = document.createRange ();
                rangeToSelect.selectNodeContents (el);

                sel.removeAllRanges ();
                sel.addRange (rangeToSelect);
            } else {
                if (document.body.createTextRange) {    // Internet Explorer
                    var rangeToSelect = document.body.createTextRange ();
                    rangeToSelect.moveToElementText (el);
                    rangeToSelect.select ();
                }
            }
        }

        function SelectFirstLine () {
            const elemToSelect = document.getElementById ("firstLine");
            SelectLine(elemToSelect);
        }
        function SelectSecondLine(){
            const elemToSelect = document.getElementById("secondLine");
            SelectLine(elemToSelect);
        }
        function SelectionThirdLine(){
            const elemToSelect = document.getElementById("thirdLine");
            SelectLine(elemToSelect);
            }
        
        function RemoveSelection(){
            if(window.getSelection){
                const sel = window.getSelection();
                sel.deleteFromDocument();
            }
            if(!sel.isCollapsed){
                const selRange = sel.getRangeAt(0);
                selRange.deleteFromDocument();
            }
            if(sel.anchorNode){
                sel.collapse(sel.anchorNode, sel.anchorOffset);
            }else{
                if(document.selection){
                    document.selection.clear();
                }
            }
        }

        function TestContainment(){
            let boldText = document.getElementById("boldText");
            if(document.getSelection){
                let sel = document.getSelection();
                if(sel.containsNode(boldText,true)){
                    alert('the selection intersects the bold text!');
                }
                else{
                    alert('the selection and the bold text have no intersection');
                }
            }
        }
        
    </script>

    <button onclick="SelectFirstLine();" contenteditable="false">Select the first line!</button>
    <button onclick="SelectSecondLine();" >Select the second line!</button>
    <button onclick="SelectionThirdLine();">Select the third line!</button>
    <button onclick="TestContainment();">Test placement</button>
    <br /><br />
    <div id = "firstLine">This is the first line.</div>
    <div id = "secondLine" >This is the second line.</div>
    <div id = "thirdLine">This is the third line.</div>
    <div onmouseup="RemoveSelection();">문장을 드래그 해보세요.</div>
    <div> Select some text on this page and use the following button to get information about 
        the placement of the <b id="boldText">bold text</b> relative to the selection.</div>
</body>
</html>