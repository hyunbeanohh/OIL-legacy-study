<script type="text/javascript">
    function fx()
    {
    
      var target=null;
      if(window.getSelection)
      {
        target=window.getSelection().getRangeAt(0).commonAncestorContainer;
        return((target.nodeType===1)?target:target.parentNode);
      }
      else if(document.selection)
      {
        var target=document.selection.createRange().parentElement();
      }
      return target;
    }
    </script>
    <input type="button" onclick="alert(fx().tagName)" value="click">
    <p id="editor" contenteditable="false">
    Hello <b>Stackoverflow</b> is cool! <i>Best place</i>
    Hello <a href="http://stackoverflow.com/">Good stuff!</a>
    </p>